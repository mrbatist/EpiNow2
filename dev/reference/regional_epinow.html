<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="
Efficiently runs epinow() across multiple regions in an efficient manner
and conducts basic data checks and cleaning such as removing regions with
fewer than non_zero_points as these are unlikely to produce reasonable
results whilst consuming significant resources. See the documentation for
epinow for further information.
By default all arguments supporting input from _opts() functions are
shared across regions (including delays, truncation, Rt settings, stan
settings, and gaussian process settings). Region specific settings are
supported by passing a named list of _opts() calls (with an entry per
region) to the relevant argument. A helper function (opts_list) is
available to facilitate building this list.
Regions can be estimated in parallel using the {future} package (see
setup_future). The progress of producing estimates across multiple regions
is tracked using the progressr package. Modify this behaviour using
progressr::handlers and enable it in batch by setting
R_PROGRESSR_ENABLE=TRUE as an environment variable."><title>Real-time Rt Estimation, Forecasting and Reporting by Region — regional_epinow • EpiNow2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Real-time Rt Estimation, Forecasting and Reporting by Region — regional_epinow"><meta property="og:description" content="
Efficiently runs epinow() across multiple regions in an efficient manner
and conducts basic data checks and cleaning such as removing regions with
fewer than non_zero_points as these are unlikely to produce reasonable
results whilst consuming significant resources. See the documentation for
epinow for further information.
By default all arguments supporting input from _opts() functions are
shared across regions (including delays, truncation, Rt settings, stan
settings, and gaussian process settings). Region specific settings are
supported by passing a named list of _opts() calls (with an entry per
region) to the relevant argument. A helper function (opts_list) is
available to facilitate building this list.
Regions can be estimated in parallel using the {future} package (see
setup_future). The progress of producing estimates across multiple regions
is tracked using the progressr package. Modify this behaviour using
progressr::handlers and enable it in batch by setting
R_PROGRESSR_ENABLE=TRUE as an environment variable."><meta property="og:image" content="epiforecasts.io/EpiNow2/reference/figures/unnamed-chunk-14-1.png"><meta property="og:image:alt" content="Example estimates produced by EpiNow2 of the reproduction number, cases by date of infection and cases by date of report"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@epiforecasts"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">EpiNow2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.3.6.2000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-model-definitions">Model definitions</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-model-definitions">
    <a class="dropdown-item" href="../articles/estimate_infections.html">estimate_infections()</a>
    <a class="dropdown-item" href="../articles/estimate_secondary.html">estimate_secondary()</a>
    <a class="dropdown-item" href="../articles/estimate_truncation.html">estimate_truncation()</a>
    <a class="dropdown-item" href="../articles/gaussian_process_implementation_details.html">Gaussian Process implementation details</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-case-studies">Case studies</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-case-studies">
    <a class="dropdown-item" href="../articles/case-studies.html">External case studies and use in the literature</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiforecasts/EpiNow2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Real-time Rt Estimation, Forecasting and Reporting by Region</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/EpiNow2/blob/HEAD/R/regional_epinow.R" class="external-link"><code>R/regional_epinow.R</code></a></small>
      <div class="d-none name"><code>regional_epinow.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing" class="external-link"><img src="figures/lifecycle-maturing.svg" alt="[Maturing]"></a>
Efficiently runs <code><a href="epinow.html">epinow()</a></code> across multiple regions in an efficient manner
and conducts basic data checks and cleaning such as removing regions with
fewer than <code>non_zero_points</code> as these are unlikely to produce reasonable
results whilst consuming significant resources. See the documentation for
<code>epinow</code> for further information.</p>
<p>By default all arguments supporting input from <code>_opts()</code> functions are
shared across regions (including delays, truncation, Rt settings, stan
settings, and gaussian process settings). Region specific settings are
supported by passing a named list of <code>_opts()</code> calls (with an entry per
region) to the relevant argument. A helper function (<code>opts_list</code>) is
available to facilitate building this list.</p>
<p>Regions can be estimated in parallel using the <code>{future}</code> package (see
<code>setup_future</code>). The progress of producing estimates across multiple regions
is tracked using the <code>progressr</code> package. Modify this behaviour using
progressr::handlers and enable it in batch by setting
<code>R_PROGRESSR_ENABLE=TRUE</code> as an environment variable.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">regional_epinow</span><span class="op">(</span></span>
<span>  <span class="va">reported_cases</span>,</span>
<span>  <span class="va">generation_time</span>,</span>
<span>  delays <span class="op">=</span> <span class="fu"><a href="delay_opts.html">delay_opts</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  truncation <span class="op">=</span> <span class="fu"><a href="trunc_opts.html">trunc_opts</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  rt <span class="op">=</span> <span class="fu"><a href="rt_opts.html">rt_opts</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  backcalc <span class="op">=</span> <span class="fu"><a href="backcalc_opts.html">backcalc_opts</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  gp <span class="op">=</span> <span class="fu"><a href="gp_opts.html">gp_opts</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  obs <span class="op">=</span> <span class="fu"><a href="obs_opts.html">obs_opts</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  stan <span class="op">=</span> <span class="fu"><a href="stan_opts.html">stan_opts</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  horizon <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  CrIs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.9</span><span class="op">)</span>,</span>
<span>  target_folder <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">target_date</span>,</span>
<span>  non_zero_points <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"regions"</span>, <span class="st">"summary"</span>, <span class="st">"samples"</span>, <span class="st">"plots"</span>, <span class="st">"latest"</span><span class="op">)</span>,</span>
<span>  return_output <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  summary_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  logs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span>check <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>reported_cases</dt>
<dd><p>A data frame of confirmed cases (confirm) by date
(date), and region (<code>region</code>).</p></dd>


<dt>generation_time</dt>
<dd><p>A call to <code><a href="generation_time_opts.html">generation_time_opts()</a></code> defining the
generation time distribution used. For backwards compatibility a list of
summary parameters can also be passed.</p></dd>


<dt>delays</dt>
<dd><p>A call to <code><a href="delay_opts.html">delay_opts()</a></code> defining delay distributions and
options. See the documentation of <code><a href="delay_opts.html">delay_opts()</a></code> and the examples below for
details.</p></dd>


<dt>truncation</dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a> A list of options as
generated by <code><a href="trunc_opts.html">trunc_opts()</a></code> defining the truncation of observed data.
Defaults to <code><a href="trunc_opts.html">trunc_opts()</a></code>. See <code><a href="estimate_truncation.html">estimate_truncation()</a></code> for an approach to
estimating truncation from data.</p></dd>


<dt>rt</dt>
<dd><p>A list of options as generated by <code><a href="rt_opts.html">rt_opts()</a></code> defining Rt
estimation. Defaults to <code><a href="rt_opts.html">rt_opts()</a></code>. Set to <code>NULL</code> to switch to using back
calculation rather than generating infections using Rt.</p></dd>


<dt>backcalc</dt>
<dd><p>A list of options as generated by <code><a href="backcalc_opts.html">backcalc_opts()</a></code> to
define the back calculation. Defaults to <code><a href="backcalc_opts.html">backcalc_opts()</a></code>.</p></dd>


<dt>gp</dt>
<dd><p>A list of options as generated by <code><a href="gp_opts.html">gp_opts()</a></code> to define the
Gaussian process. Defaults to <code><a href="gp_opts.html">gp_opts()</a></code>.Set to NULL to disable the
Gaussian process.</p></dd>


<dt>obs</dt>
<dd><p>A list of options as generated by <code><a href="obs_opts.html">obs_opts()</a></code> defining the
observation model. Defaults to <code><a href="obs_opts.html">obs_opts()</a></code>.</p></dd>


<dt>stan</dt>
<dd><p>A list of stan options as generated by <code><a href="stan_opts.html">stan_opts()</a></code>. Defaults
to <code><a href="stan_opts.html">stan_opts()</a></code>. Can be used to override <code>data</code>, <code>init</code>, and <code>verbose</code>
settings if desired.</p></dd>


<dt>horizon</dt>
<dd><p>Numeric, defaults to 7. Number of days into the future to
forecast.</p></dd>


<dt>CrIs</dt>
<dd><p>Numeric vector of credible intervals to calculate.</p></dd>


<dt>target_folder</dt>
<dd><p>Character string specifying where to save results (will
create if not present).</p></dd>


<dt>target_date</dt>
<dd><p>Date, defaults to maximum found in the data if not
specified.</p></dd>


<dt>non_zero_points</dt>
<dd><p>Numeric, the minimum number of time points with
non-zero cases in a region required for that region to be evaluated.
Defaults to 7.</p></dd>


<dt>output</dt>
<dd><p>A character vector of optional output to return. Supported
options are the individual regional estimates ("regions"),  samples
("samples"), plots ("plots"), copying the individual region dated folder into
a latest folder (if <code>target_folder</code> is not null, set using "latest"), the
stan fit of the underlying model ("fit"), and an overall summary across
regions ("summary"). The default is to return samples and plots alongside
summarised estimates and summary statistics. If <code>target_folder</code> is not NULL
then the default is also to copy all results into a latest folder.</p></dd>


<dt>return_output</dt>
<dd><p>Logical, defaults to FALSE. Should output be returned,
this automatically updates to TRUE if no directory for saving is specified.</p></dd>


<dt>summary_args</dt>
<dd><p>A list of arguments passed to <code>regional_summary</code>. See
the <code>regional_summary</code> documentation for details.</p></dd>


<dt>verbose</dt>
<dd><p>Logical defaults to FALSE. Outputs verbose progress messages
to the console from <code>epinow</code>.</p></dd>


<dt>logs</dt>
<dd><p>Character path indicating the target folder in which to store log
information. Defaults to the temporary directory if not specified. Default
logging can be disabled if <code>logs</code> is set to NULL. If specifying a custom
logging setup then the code for <code>setup_default_logging</code> and the
<code>setup_logging</code> function are a sensible place to start.</p></dd>


<dt>...</dt>
<dd><p>Pass additional arguments to <code>epinow</code>. See the documentation for
<code>epinow</code> for details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list of output stratified at the top level into regional output
and across region output summary output</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>epinow estimate_infections forecast_infections</p>
<p>setup_future regional_summary</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># set number of cores to use</span></span></span>
<span class="r-in"><span><span class="va">old_opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>mc.cores <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># construct example distributions</span></span></span>
<span class="r-in"><span><span class="va">generation_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_generation_time.html">get_generation_time</a></span><span class="op">(</span></span></span>
<span class="r-in"><span> disease <span class="op">=</span> <span class="st">"SARS-CoV-2"</span>, source <span class="op">=</span> <span class="st">"ganyani"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">incubation_period</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_incubation_period.html">get_incubation_period</a></span><span class="op">(</span></span></span>
<span class="r-in"><span> disease <span class="op">=</span> <span class="st">"SARS-CoV-2"</span>, source <span class="op">=</span> <span class="st">"lauer"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">reporting_delay</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  mean <span class="op">=</span> <span class="fu"><a href="convert_to_logmean.html">convert_to_logmean</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  mean_sd <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>  sd <span class="op">=</span> <span class="fu"><a href="convert_to_logsd.html">convert_to_logsd</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sd_sd <span class="op">=</span> <span class="fl">0.1</span>, max <span class="op">=</span> <span class="fl">15</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># uses example case vector</span></span></span>
<span class="r-in"><span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="va">example_confirmed</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">60</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/rbindlist.html" class="external-link">rbindlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">cases</span><span class="op">)</span><span class="op">[</span>, <span class="va">region</span> <span class="op">:=</span> <span class="st">"testland"</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  <span class="va">cases</span><span class="op">[</span>, <span class="va">region</span> <span class="op">:=</span> <span class="st">"realland"</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># run epinow across multiple regions and generate summaries</span></span></span>
<span class="r-in"><span><span class="co"># samples and warmup have been reduced for this example</span></span></span>
<span class="r-in"><span><span class="va">def</span> <span class="op">&lt;-</span> <span class="fu">regional_epinow</span><span class="op">(</span></span></span>
<span class="r-in"><span>  reported_cases <span class="op">=</span> <span class="va">cases</span>,</span></span>
<span class="r-in"><span>  generation_time <span class="op">=</span> <span class="va">generation_time</span>,</span></span>
<span class="r-in"><span>  delays <span class="op">=</span> <span class="fu"><a href="delay_opts.html">delay_opts</a></span><span class="op">(</span><span class="va">incubation_period</span>, <span class="va">reporting_delay</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rt <span class="op">=</span> <span class="fu"><a href="rt_opts.html">rt_opts</a></span><span class="op">(</span>prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">2</span>, sd <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  stan <span class="op">=</span> <span class="fu"><a href="stan_opts.html">stan_opts</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    samples <span class="op">=</span> <span class="fl">100</span>, warmup <span class="op">=</span> <span class="fl">200</span>,</span></span>
<span class="r-in"><span>    control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adapt_delta <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:42:02] Producing following optional outputs: regions, summary, samples, plots, latest</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Logging threshold set at INFO for the EpiNow2 logger</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Writing EpiNow2 logs to the console and: /tmp/RtmpOyQIgs/regional-epinow/2020-04-21.log</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Logging threshold set at INFO for the EpiNow2.epinow logger</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Writing EpiNow2.epinow logs to: /tmp/RtmpOyQIgs/epinow/2020-04-21.log</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:42:02] Reporting estimates using data up to: 2020-04-21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:42:02] No target directory specified so returning output</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:42:02] Producing estimates for: testland, realland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:42:02] Regions excluded: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:45:38] Completed estimates for: testland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:03] Completed estimates for: realland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:03] Completed regional estimates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:03] Regions with estimates: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:03] Regions with runtime errors: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:03] Producing summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:03] No summary directory specified so returning summary output</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:04] No target directory specified so returning timings</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># apply a different rt method per region</span></span></span>
<span class="r-in"><span><span class="co"># (here a gaussian process and a weekly random walk)</span></span></span>
<span class="r-in"><span><span class="va">gp</span> <span class="op">&lt;-</span> <span class="fu"><a href="opts_list.html">opts_list</a></span><span class="op">(</span><span class="fu"><a href="gp_opts.html">gp_opts</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">cases</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gp</span> <span class="op">&lt;-</span> <span class="fu"><a href="update_list.html">update_list</a></span><span class="op">(</span><span class="va">gp</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>realland <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rt</span> <span class="op">&lt;-</span> <span class="fu"><a href="opts_list.html">opts_list</a></span><span class="op">(</span><span class="fu"><a href="rt_opts.html">rt_opts</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">cases</span>, realland <span class="op">=</span> <span class="fu"><a href="rt_opts.html">rt_opts</a></span><span class="op">(</span>rw <span class="op">=</span> <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">region_rt</span> <span class="op">&lt;-</span> <span class="fu">regional_epinow</span><span class="op">(</span></span></span>
<span class="r-in"><span>  reported_cases <span class="op">=</span> <span class="va">cases</span>,</span></span>
<span class="r-in"><span>  generation_time <span class="op">=</span> <span class="va">generation_time</span>,</span></span>
<span class="r-in"><span>  delays <span class="op">=</span> <span class="fu"><a href="delay_opts.html">delay_opts</a></span><span class="op">(</span><span class="va">incubation_period</span>, <span class="va">reporting_delay</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rt <span class="op">=</span> <span class="va">rt</span>, gp <span class="op">=</span> <span class="va">gp</span>,</span></span>
<span class="r-in"><span>  stan <span class="op">=</span> <span class="fu"><a href="stan_opts.html">stan_opts</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    samples <span class="op">=</span> <span class="fl">100</span>, warmup <span class="op">=</span> <span class="fl">200</span>,</span></span>
<span class="r-in"><span>    control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adapt_delta <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:04] Producing following optional outputs: regions, summary, samples, plots, latest</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Logging threshold set at INFO for the EpiNow2 logger</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Writing EpiNow2 logs to the console and: /tmp/RtmpOyQIgs/regional-epinow/2020-04-21.log</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Logging threshold set at INFO for the EpiNow2.epinow logger</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Writing EpiNow2.epinow logs to: /tmp/RtmpOyQIgs/epinow/2020-04-21.log</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:04] Reporting estimates using data up to: 2020-04-21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:04] No target directory specified so returning output</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:04] Producing estimates for: testland, realland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:49:04] Regions excluded: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:52:36] Completed estimates for: testland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:53:24] Completed estimates for: realland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:53:24] Completed regional estimates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:53:24] Regions with estimates: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:53:24] Regions with runtime errors: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:53:24] Producing summary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:53:24] No summary directory specified so returning summary output</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2023-04-28 04:53:24] No target directory specified so returning timings</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="va">old_opts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Joel Hellewell, Katharine Sherratt, Katelyn Gostic, Joe Hickson, Hamada S. Badr, Michael DeWitt, EpiForecasts, <a href="https://www.lshtm.ac.uk/aboutus/people/funk.sebastian" class="external-link">Sebastian Funk</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

